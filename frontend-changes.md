# 前端更改记录 - 深色/浅色主题切换功能

## 概述

本次更新为 RAG 聊天机器人添加了深色/浅色主题切换功能，允许用户根据自己的偏好选择界面主题。

## 实现的功能

### 1. 主题切换按钮
- 位置：固定在页面右上角
- 设计：圆形按钮，使用太阳/月亮图标
- 动画：平滑的图标切换动画（旋转 + 缩放）
- 可访问性：支持键盘导航和快捷键 `Ctrl/Cmd + Shift + T`

### 2. 浅色主题配色
- 背景色：浅灰色系 (`#f8fafc`, `#ffffff`)
- 文字色：深色文字 (`#1e293b`, `#64748b`)
- 边框色：浅灰色边框 (`#e2e8f0`)
- 保持主色调蓝色 (`#2563eb`) 不变，确保品牌一致性

### 3. 主题持久化
- 使用 `localStorage` 保存用户选择的主题
- 页面刷新后自动恢复上次选择的主题

### 4. 平滑过渡效果
- 主题切换时所有元素平滑过渡（0.3秒）
- 包括背景色、文字色、边框色等

## 文件修改详情

### `frontend/index.html`

**新增内容：**
- 添加了主题切换按钮元素，包含太阳和月亮两个 SVG 图标
- 按钮使用 `position: fixed` 定位在右上角

### `frontend/style.css`

**新增内容：**
1. 浅色主题 CSS 变量 (`[data-theme="light"]`)
   - 重新定义了所有颜色变量以适配浅色主题
   - 保持主色调蓝色不变

2. 主题切换按钮样式
   - 圆形按钮，44px x 44px（移动端 40px）
   - 悬停和焦点状态样式
   - 图标切换动画（旋转 + 缩放 + 透明度）

3. 平滑过渡效果
   - 为 `body` 添加主题切换过渡
   - 为所有主题相关元素添加过渡效果

**修改内容：**
- 将 CSS 变量从单一的 `:root` 改为支持 `data-theme` 属性切换

### `frontend/script.js`

**新增内容：**
1. `setupThemeToggle()` 函数
   - 初始化主题（从 localStorage 读取，默认深色）
   - 绑定按钮点击事件
   - 支持键盘快捷键 `Ctrl/Cmd + Shift + T`

2. `setTheme(theme)` 函数
   - 设置 `data-theme` 属性
   - 保存到 localStorage

**修改内容：**
- 在 `DOMContentLoaded` 事件中调用 `setupThemeToggle()`

## 浏览器兼容性

- Chrome/Edge: 完全支持
- Firefox: 完全支持
- Safari: 完全支持
- 最低要求：支持 CSS 变量和 localStorage 的现代浏览器

## 可访问性

- 按钮包含 `aria-label` 属性
- 支持 Tab 键导航
- 支持键盘快捷键
- 焦点状态可见（蓝色光晕）

## 使用方法

1. 点击右上角的圆形按钮切换主题
2. 或使用键盘快捷键 `Ctrl/Cmd + Shift + T`
3. 主题选择会自动保存，下次访问时自动应用

## 设计原则

1. **保持一致性**：两种主题使用相同的视觉层次和布局
2. **确保可读性**：浅色主题使用深色文字，确保良好的对比度
3. **平滑过渡**：所有颜色变化都有 0.3 秒的过渡动画
4. **无障碍访问**：完全支持键盘操作和屏幕阅读器

## 未来可能的改进

- 添加自动跟随系统主题选项
- 添加更多主题预设
- 允许自定义主题颜色
